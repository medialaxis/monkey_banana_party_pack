export TOP=$(realpath $(dirname $BASH_SOURCE)/..)

pushd "$TOP/bash" > /dev/null

# Enable minor spell checking for directory names.
shopt -s cdspell

# If a command name names a directory, change to that directory.
shopt -s autocd

# Add multiline commands to history
shopt -s cmdhist

# Hostname completion after @
shopt -s hostcomplete

# Set PATH
export PATH=$HOME/bin:$PATH
export PATH=$HOME/.config/monkey_banana_party_pack/bin:$PATH
export PATH=$HOME/.cabal/bin:$PATH
export PATH=$HOME/.local/bin:$PATH

# Editor settings
export EDITOR=vim

# Misc aliases
alias cal='cal -mw'
alias top='top -d1'

# Disable ctrl-s freezing
stty -ixon

# Clear terminal on CTRL-L
bind -x '"\C-l": clear;'

# Clear the prompt first. This is the default prompt command. This prints a
# text in the terminal window title.
PROMPT_COMMAND='printf "\033]0;%s@%s:%s\007" "${USER}" "${HOSTNAME%%.*}" "${PWD/#$HOME/\~}"'

source prompt.sh
source history.sh
source terminal.sh
source fzf.sh
source ls.sh
source /usr/share/lf/lfcd.sh
[[ -r "/usr/share/z/z.sh" ]] && source /usr/share/z/z.sh

# This must be added last so that the exit code is saved before any other
# commands clobber it.
PROMPT_COMMAND="OK=\$?; $PROMPT_COMMAND"

popd > /dev/null
